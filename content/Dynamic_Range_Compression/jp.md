---
title: Dynamic Range Compression jp
contributors:
  - Yz2house
---

<div class="pagetitle">

ダイナミックレンジの圧縮

</div>

## イントロダクション

　ダイナミックレンジとは、測定された信号の最大値と最小値の比のことです。写真の世界で言うと、一般的には撮影シーンの最も明るい要素と暗い要素の比のことを指します。霧の深い日の屋外シーンは最も明るい要素と暗い要素の差が非常に小さい、“ローダイナミックレンジ（LDR）”のシーンです。対照的に窓から晴れた空が望めるような屋内シーンが“ハイダイナミックレンジ（HDR）”のシーンです。

　[人間の視覚システム](https://en.wikipedia.org/wiki/Dynamic_range#Human_perception)は、順応性が高く、広いダイナミックレンジを持っています。だから、夜には瞬く星を見ることが出来るし、昼間は青空を見ることが出来ます。しかし、カメラのセンサーやモニターは順応性が低く、しかもダイナミックレンジが狭いので、撮影シーン次第で、そのダイナミックレンジが、カメラ“センサー”のダイナミックレンジを簡単に超えてしまうことがままあります。この場合、写真や画像処理ではHDRをLDRにマッピングする処置が必要となります。　

　一般的に、ダイナミックレンジの変更処理には2つの方法があります：変更先のダイナミックレンジを超える部分のデータを廃棄してしまう（例：ハイライトのクリッピング）方法と、変更先のダイナミックレンジに収まるようにデータを圧縮する方法です。本節で解説されている〈ダイナミックレンジ圧縮〉は、R.
Fattalとその仲間が開発した[Gradient Domain High Dynamic Range
Compression](http://www.cs.huji.ac.il/~danix/hdr/)というアルゴリズムをベースにした後者の方法です。このアルゴリズムは、Luminance
HDRなどのソフトウェアでは、単に“Fattal”と呼ばれています。

　このアルゴリズムは圧縮のコントロールに２つのパラメータ（(αとβ)を使い、それぞれ“ディテール”と“量”というスライダーで調節します。この機能はRGB色空間で作用し、その適用は[ノイズ低減](Noise_Reduction/jp.md)
と
[霞除去の](Haze_Removal/jp.md)後、[露光補正などの](Exposure/jp.md)様な他のトーンカーブ調整の前になります。

　注意：他の機能を使ってダイナミックレンジを圧縮する方法もあります。最も単純なのは[露光補正のコントラストスライダーの](Exposure/jp.md)値をマイナスに設定してダイナミックレンジを下げる（むしろ、区分を直す）方法です。しかし、画像がねむくなり、つまらない印象になりがちです。トーンカーブはそれより調整が効きやすいですが、細かい調節が沢山必要になります。
　

## 利用法

　撮影した画像のダイナミックレンジが広すぎて、貴方のモニターでは美しく映らない場合、つまり画像の暗い部分と明るい部分の差（コントラスト）が大きすぎて、それら部分ではディテールが少ないという状態の時、この機能を使います。

　**Panorama
Stitcherなどのアプリケーションに関する注意。**この機能の効果は編集中の画像のダイナミックレンジ（及びヒストグラム）次第です。一連の画像をスティッチング加工する場合、各画像には隣り合う画像と重なる部分が存在し、たとえ各画像に同じ編集パラメータを適用しても、最終的な効果は一致しません-つまり隣り合った画像の間には急激に明るさが変わる部分があるからです。従って、このダイナミックレンジの圧縮機能は、元画像には使わない方がいいでしょう。一連の画像の間で一貫したダイナミックレンジの圧縮を行う場合は、この機能の代わりにトーンカーブを使います。但し、この機能をパノラマ画像のスティッチングに使うことは出来ます。

## インターフェイス

### **量**

　圧縮の強さを変えるスライダーです。高い値にするとダイナミックレンジが狭まります（ヒストグラムで効果の程が簡単に分かります）。

### **ディテール**

　ローカルコントラストをどれだけ維持するのか調整するスライダーです。プラスの値はコントラストを保つために圧縮を減らします。マイナスの値はコントラストを減らします。

### アンカー

　シャドウ部分、或いはハイライト部分で圧縮に重みを付けるスライダーです。実質的には露光量補正の様な働きをします。

　スクリーンショットは、各スライダー操作による効果の例です（画像をクリックすると拡大出来ます）。A：元画像、B：デフォルト設定の圧縮効果、C：量を増やした画像（強い圧縮）、D：ディテールを減らした画像（ローカルコントラストが減る）、E：量を増やしディテールを増やした画像（強い圧縮によるローカルコントラストの低下を補う

<figure>
<img src="DRC-Example.jpg" title="DRC-Example.jpg" />
<figcaption>DRC-Example.jpg</figcaption>
</figure>
