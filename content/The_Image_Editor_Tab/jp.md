---
title: The Image Editor Tab jp
contributors:
  - Yz2house
---

<div class="pagetitle">

編集

</div>

<figure>
<img src="Rt_55_trains.png" title="Rt_55_trains.png" />
<figcaption>Rt_55_trains.png</figcaption>
</figure>

## イントロダクション

　編集タブは画像編集を行う画面で、デフォルトの設定は、"シングル編集モード垂直型"（SETM/VT）です。メモリーの使用が効率的で、[画像スライド](The_Image_Editor_Tab/jp#画像スライド.md)（後述）が使えるモードです。モードを"マルチ編集タブモード"に変更することも出来ます。⟨環境設定⟩パネルを開き、一般タブの[レイアウトで](Preferences/jp#レイアウト.md)変更を行います。但し、このモードは、各編集画面で画像のサイズと使用する機能に応じて一定量のメモリーを割り当てるため、システムへの負荷が高くなります。また、画像スライドも使えないので、編集操作に慣れるまでは、シングル編集モードを使うことを勧めます。

## プレビューパネル

　中央のパネルは編集する画像のプレビューを表示します。編集する画像がraw形式であれば、プレビューはそのrawデータから生成されます。[ツールボックスの](The_Image_Editor_Tab/jp#ツールボックス.md)様々な機能を使って行われる編集は、このプレビュー画像に反映されます。一つ注意があります。機能の中にはプレビュー画像を1:1（100％）以上に拡大しないと調整結果を見極められないものがあります。その様な機能は機能名の横にそれを示す![<File:One-to-one-small.png>](One-to-one-small.png "File:One-to-one-small.png")というアイコンが付いています。

　編集する画像を開く際に、その画像にサイドカーファイル（拡張子はpp3）が付随していれば、RawTherapeeはその中に記載されている各機能の設定値を読み込んで、それらを反映した画像をプレビューに表示します。サイドカーファイルがない場合は、⟨環境設定⟩の"画像処理タブ"の中の[画像処理のデフォルト値で](Preferences/jp#画像処理のデフォルト値.md)指定されているプロファイルが使われます。現在の編集画像が閉じられると（別な編集画像に移動した場合、或いはRawTherapeeでの編集を終了した場合）、その時点の機能の設定値が、[処理プロファイルの取り扱いに](Preferences/jp#処理プロファイルの取り扱い.md)従って、サイドカーファイルに自動的に記録されます。

### Raw画像を開いた時のプレビュー画像とカメラ出しのJPEG画像の映りが違う

　RawTherapeeで初めてrawファイルを開いた時、プレビュー画面に表示された画像が、カメラの生成したJPEG画像、もしくは他のソフトウェアを使って開いたそのraw画像と違うと感じるかもしれません。違いが小さい場合もあれば、大きい場合もあります。例えば、暗い、ねむい、コントラストが足りない、ノイズが多い、などです。何故でしょうか？

　何故違うのか理解するために、初めに3つの事を知っておいて下さい：

1.  貴方がrawモードで撮影したからといって、カメラのディスプレイは貴方にrawデータを見せる訳ではありません。ディスプレイ画面で画像を見せる前に、カメラは色々とraw画像に調整を加えているのです。たとえ、カメラのファームウェアが許す限り、あらゆる調整設定を"ニュートラル"ポジションにして撮影したとしても、貴方が見るのは未調整の画像ではありません。具体的に何が行われているかと言えば、そのカメラの設計者やメーカーの選択次第ですが、通常、独自のトーンカーブの適用、彩度の調整、シャープネスの適用、及びノイズリダクションの適用です。更に、幾つかのカメラ、特にマイクロフォーサーズシステムを採用しているローエンドカメラの場合は、レンズやレンズフードによる歪曲収差の補正も行います。樽型歪みや糸巻型歪みを補正するだけでなく、重度の周辺光量不足も隠しています。また、多くのカメラは、撮影時の露出が概ね0.3EV、中には1.3EV以上も、アンダーになるように設計されています。これはハイライト部分の輝度領域に余裕を持たせるためです。そして、カメラ（或いはソフトウェア）は、そのraw画像を処理する際に同量の露光でプラス補正を施します。そうすることで画像を正しい明るさに戻し、ハイライト部分にクリッピングがある場合に、その復元の可能性を残すように工夫されています。
2.  Rawモードで撮影を行うと、多くのカメラはトーンカーブやその他の調整機能でrawファイルを加工したJPEG画像をそのrawファイルの中に埋め込みます。通常、そのカメラの最大解像度のJPEG画像が埋め込まれますが、中には３つの異なる解像度の画像を埋め込むカメラもあります。殆どの一眼レフカメラは、raw、JPEG、或いはraw+JPEGという３種類のファイル形式で画像を保存できますが、この解説で言うJPEG画像はrawファイルに埋め込まれているものを指します（たとえ撮影がrawモードで行われていても）。これらrawファイルをRawTherapee以外のソフトウェアで開くと、普通貴方が見るのはrawデータではなく、そこに埋め込まれている調整済みのJPEG画像の方です。[IrfanView](http://en.wikipedia.org/wiki/IrfanView),
    [XnView](http://en.wikipedia.org/wiki/XnView),
    [Gwenview](http://en.wikipedia.org/wiki/Gwenview),
    [Geeqie](http://en.wikipedia.org/wiki/Geeqie), [Eye of
    GNOME](http://en.wikipedia.org/wiki/Eye_of_GNOME),
    [F-Spot](http://en.wikipedia.org/wiki/F-Spot),
    [Shotwell](http://en.wikipedia.org/wiki/Shotwell_(software)),
    [gThumb](http://en.wikipedia.org/wiki/GThumb)などのソフトは、rawデータを貴方に見せることが出来ない、或いは、デフォルトでrawデータを見せないような設定になっているソフトです。上記に関連して、更に一つ指摘させて下さい。もし、貴方が"raw＋JPEG"モードで撮影されているなら、それは事実上メモリーを無駄に使っているのに等しく、そこから得る物もありません。お分かりのように、rawファイルにJPEG画像が入っているからで、紹介したようなソフトでそのJPEG画像を見ることが出来るからです。
3.  殆どの現像ソフト（rawファイルに埋め込まれたJPEG画像を表示するだけでなく、実際にrawデータが読み込めるソフト）も、トーンカーブなどを使って画像を事前に調整しています。従ってそれらソフトの最もニュートラルな設定でさえ、手付かずのraw画像の状態を見ることは出来ません。Adobe
    Lightroom©もその一つです。RawTherapeeのニュートラル設定と比べれば、そのニュートラル設定も疑似的であり、露出が調整されています。

　一方、RawTherapeeは、中央のプレビュー画面で本当のrawイメージを見せることが出来ます。Raw画像を開く時に"ニュートラル"プロファイルを適用すれば、作業色空間でカメラのホワイトバランスでデモザイクしただけの画像を見ることが出来ます。[デモザイクの方式で](Demosaicing/jp#デモザイク.md)、"なし"を選べば、デモザイクさえ施していない画像を見ることも可能です。

　反対に、編集の起点で美的印象の良い画像を表示させる処理プロファイル、"Auto-Matched
Curve"、を適用することも出来ます。このプロファイルはraw画像にJPEG画像が埋め込まれていれば、それを解析して類似したトーンカーブを自動で生成しraw画像に適用します。JPEG画像が埋め込まれていなければ、殆どの場合、美的印象が良い"Standard
Film
Curve"という処理プロファイルが使えます。これには編集画像のノイズの状態（低ISO、中間ISO、高ISO）に応じた3種類のプロファイルが用意されています。

### スクロールの可能なツールバー

　メインプレビュー画面の上と下にあるツールバーには一定の数のボタンやその他の機能が収まっています。

### プレビュー画面の背景色

<figure>
<img src="Rt59_preview_background_all.png"
title="File:Rt59 preview background all.png" />
<figcaption><a href="File:Rt59">File:Rt59</a> preview background
all.png</figcaption>
</figure>

　保存（現像）した画像をウェブサイト、画像ビューワー、又は印刷で見る際の映り具合を見極めるため、画像の背景色をそれらの環境に似ている色に変えることが出来ます。

　背景色の変更は切り抜き画像の周辺部分でも可能です。変更は⟨環境設定⟩の一般タブにある[切り抜きのマスクカラーで](Preferences/jp#インターフェイスの外観.md)行います。

背景色の選択：

- 　テーマ色（[インターフェイスの外観を](Preferences/jp#インターフェイスの外観.md)参照）
- 　黒
- 　[中間グレー](https://en.wikipedia.org/wiki/Middle_gray)
- 　白

### プレビューのカラーチャンネル

<figure>
<img src="Rt59_preview_channel_all.png"
title="File:Rt59_preview_channel_all.png" />
<figcaption><a
href="File:Rt59_preview_channel_all.png">File:Rt59_preview_channel_all.png</a></figcaption>
</figure>

　プレビューのカラーチャンネルは次の4つに切り替えることが出来ます：

- 　レッド
- 　グリーン
- 　ブルー
- 　輝度（＝0.299\*レッド＋0.587\*グリーン＋0.114\*ブルー）

　各カラーチャンネルによるプレビューは、RGBカーブを調整する時や、チャンネルミキサーを使った白黒イメージへの変換、ノイズの評価を行う時などに役立つと思います。輝度チャンネルは、調整パラメータを変えずに、簡単に編集画像の白黒イメージを参照出来るので、どのチャンネルに潰れや飛びがあるかを見極める時や、意図的な白黒イメージ変換を行う時に使えます。

### プレビューマスク

<figure>
<img src="Rt59_preview_mask_all.png"
title="File:Rt59_preview_mask_all.png" />
<figcaption><a
href="File:Rt59_preview_mask_all.png">File:Rt59_preview_mask_all.png</a></figcaption>
</figure>

　利用可能な機能は以下の通りです：

- 　フォーカスマスク：ピントの合っている（映りがシャープかどうかをベースにしています）をハイライト表示します。
- 　シャープニングコントラストマスク：これはシャープニングの効果が及ぶ領域を決めるマスクを可視化する機能です。[シャープニングのコントラストマスクも](Sharpening/jp#コントラストマスク.md)参照して下さい。
- 　シャドウのクリッピングを表示
- 　ハイライトのクリッピングを表示

<figure>
<img src="Preview_6_focus_2.jpg"
title="ピントの合っている面を示すフォーカスマスク" />
<figcaption>ピントの合っている面を示すフォーカスマスク</figcaption>
</figure>

### 詳細ウィンドウ

　画像の一部分を拡大する“詳細ウィンドウ”のボタン![<File:Window-add.png>](Window-add.png "File:Window-add.png")が、メインプレビュー画面下のズームボタンの隣にあります。詳細ウィンドウも、その大きさやズーム率を変えられます。これにより適度な大きさで、確認したい複数部分の画像を100％（或いはそれ以上）の拡大率で見ることが出来ます。このことはシステムのスペックが低いユーザーには特に有益でしょう（もちろん通常のスペックのユーザーにとっても）。一部を拡大する動作の方が、画像全体の100％拡大より、システムへの負荷が少ないので早いのですが、一部の機能（例、ノイズ低減）は拡大率が100％以下の場合、画面に反映されません。しかし、この詳細ウィンドウは画像の一部を100％の拡大率で表示出来るので、ノイズ低減機能などの効果も確認出来ます。この性質を使えば、画像全体の全般的な映り具合を縮小されているメインプレビュー画像で確認しながら、シャープニングやノイズ低減の効果の確認は詳細ウィンドウを使って行えば効率的です。

### プレビュー画面の更新遅延措置

　機能のパラメータが変化すると、それをプレビュー画面に反映するため、シグナルが送られます。もしこの際、更新に対する″遅延措置″が無かった場合を想像してみて下さい。例えば、露光量補正スライダーを0.0から∔0.6へ動かしたとしましょう。プレビュー画面更新のための信号は、露光量補正の最小単位毎に送られますので、∔0.01、∔0.02、…∔0.59、∔0.06、つまり60回シグナルが送られることになります。しかし、これに合わせてプレビュー画面を60回更新する必要は全くないでしょう。実際その様な設定はスライダーを動かすより時間がかかってしまいます。このことは、例えばノイズ低減のような複雑な機能になれば更に顕著で、プレビュー画面の更新に約1秒要します（貴方のPCのCPUのスペックやプレビュー画面の大きさにもよりますが）。これを解決するために、シグナルを送るのを僅かに遅らせ、この間の信号変化を無視させます。プレビュー画面を更新するのは、この僅かな待機時間の後にパラメータが変化していない場合だけです。
　そのために2つのパラメータを用意しました：

最短待機時間  
デフォルト値＝100ms

これはプレビュー画面を更新する前の最低待機時間です。

最長待機時間  
デフォルト値＝200ms

　これはプレビュー画面を更新する前の最長待機時間です。もし、パラメータの変化が続いても、RawTherapeeは画面更新を行うシグナルを送るのに、この時間以上は待ちません。最低待機時間を設定しているのは、不必要な画面更新でCPUに過大な負荷をかけないようにするためです。
どちらの待機時間もconfigフォルダーの中のオプションファイルにて変更が可能です。

## 左側のパネル

　左側のパネルは、常に“ナビゲーター”と“履歴”、“スナップショット”を表示します。また、メインヒストグラムを右側に表示させる選択肢もあります（“*環境設定→一般→レイアウト→ヒストグラムを左に*”のチェックを外す）。この左側のパネルは、左上にある![Hide
left panel icon](panel-to-left.png "Hide left panel icon")
非表示アイコンや[キーボードショートカットを](Keyboard_Shortcuts/jp#キーボードショートカット.md)使って、非表示にすることも出来ます。

### メインヒストグラム

<figure>
<img src="Rt57_histogram_wide_labeled.png"
title="Rt57_histogram_wide_labeled.png" />
<figcaption>Rt57_histogram_wide_labeled.png</figcaption>
</figure>

<figure>
<img src="RT57_histogram_ani.gif" title="RT57_histogram_ani.gif" />
<figcaption>RT57_histogram_ani.gif</figcaption>
</figure>

<figure>
<img src="Rt_histogram_rgbindicator.png"
title="Rt_histogram_rgbindicator.png" />
<figcaption>Rt_histogram_rgbindicator.png</figcaption>
</figure>

　画像のヒストグラムは特定の値のピクセルの数をグラフ上に表示したものです。通常、水平軸は値の範囲を示し、垂直軸は水平軸で示される値のピクセルの数を表します。水平軸・垂直軸は必ずしも線形の関係ではありません、対数での表示も可能です。

　画像のビット深度に関わらず、ヒストグラム自体のサンプリング範囲の精度は256です。このことを理解するために、整数精度を使った16ビット画像を例に取りましょう。表現可能な値の範囲は0～65535です（2の16乗は65536で、0が最小値となるので最大値は65535になります）。16ビット精度のヒストグラムを描こうとした場合、データを忠実に表すなら65535ピクセルが必要になりますが、現在その様に横長なスクリーンはありません。その代わりに、0～255（65535/256\*1）のピクセルの値を一つのグループとし、1番目の“ビン（統計用語）”とします。2番目のビンは256～511（65535/256\*2）までのピクセルの値となります。3番目は512～767（65535/256\*3）です。この様にして256個のビンを入力データのビット深度に関係なく作ります。そして、RawTherapeeはこれらビンに対し32ビット浮動小数点精度を使います。

　メインのヒストグラムは以下一つ以上のチャンネルを同時に表示できます:

- ![<File:Histogram-red-on-small.svg>](Histogram-red-on-small.svg "File:Histogram-red-on-small.svg")レッドチャンネル、
- ![<File:Histogram-green-on-small.svg>](Histogram-green-on-small.svg "File:Histogram-green-on-small.svg")
  グリーンチャンネル
- ![<File:Histogram-blue-on-small.svg>](Histogram-blue-on-small.svg "File:Histogram-blue-on-small.svg")
  ブルーチャンネル
- ![<File:Histogram-silver-on-small.svg>](Histogram-silver-on-small.svg "File:Histogram-silver-on-small.svg")
  Labの輝度
- ![<File:Histogram-gold-on-small.svg>](Histogram-gold-on-small.svg "File:Histogram-gold-on-small.svg")
  \[<https://ja.wikipedia.org/wiki/色度>　色度\].
- ![<File:Histogram-bayer-on-small.svg>](Histogram-bayer-on-small.svg "File:Histogram-bayer-on-small.svg")
  デモザイク処理前の元のraw画像のレッド、グリーン、ブルーチャンネル

　ヒストグラムは色域のボタン![<File:Gamut-hist.png>](Gamut-hist.png "File:Gamut-hist.png")が押されていない場合は（デフォルト）、ガンマ補正を行った出力プロファイルで各チャンネルを表示し、ボタンが押されている場合は作業プロファイルで各チャンネルが表示されます。このボタンのオン・オフは、シャドウ部分のクリップインジケーター![<File:Warning-shadows.png>](Warning-shadows.png "File:Warning-shadows.png")や、ハイライト部分のクリップインジケーター![<File:Warning-highlights.png>](Warning-highlights.png "File:Warning-highlights.png")と同じく、ナビゲーターパネルで表示される数値にも影響しますが、rawヒストグラムには影響しません。

　パイプの中を流れる水のように、RawTherapeeの中を流れる画像データは入力ファイルから、様々な工程（その殆どはユーザーがコントロール出来ます）を経て、出力ファイルになります。出力ファイルは画像としてファイルに保存されたり、スクリーン上に表示されたりします。各工程は画像の色に影響します。ヒストグラムの目的はその工程の何カ所でデータを可視化することです。デフォルトのヒストグラムは貴方が編集を行った出力画像を保存した時の色のデータを表示するように設定されています。色域のボタン![<File:Gamut-hist.png>](Gamut-hist.png "File:Gamut-hist.png")を有効にすると、作業色空間に変換する際の初期のピークデータで表示します。変換前、或いはデモザイク処理が適用する前の、rawデータを表示させることも出来ます。
上図の大きなヒストグラムを例にとって検証してみましょう。4つのヒストグラム（レッド、グリーン、ブルー、輝度）が表示されていますが、一度に1つのヒストグラムだけに注目します。水平軸はヒストグラムで表示可能な色データの範囲を意味します、“A”は表示できる可能な限り暗い部分のデータで、“C”が中間トーン部分、“E”が可能な限り明るい部分のデータになります。ヒストグラムの垂直軸は、水平軸の値を持つピクセルがどれ位あるかを示しています。レッドチャンネルに注目すると、最も暗い部分の辺り（0～非常に暗い）ではピクセルの数が0です、何故ならその部分のヒストグラムの線が底を這っているからです。一方、少し暗い部分（AとBの間）では、レッドチャンネルのピクセル数は大きく増えています。また、明るい部分（“D”周辺）でも、大きくピクセル数が増えています。そして、重要なことですが、ヒストグラムの右端、Eのレッドチャンネルの最も明るい点でピクセル数が突出しています、つまりデータがクリップ（飽和）している状態です。

　一般的に、ポートレート写真では肌の色がクリップしないよう注意が必要ですが、\[<https://ja.wikipedia.org/wiki/鏡面ハイライト>　鏡面ハイライト\]のようなケースではその限りではありません。ヒストグラムがクリッピングを示している場合、貴方がそれに対し注意しているのであれば、クリッピングが発生している部分の確認から作業を始めるべきでしょう。Rawのヒストグラムをチェックします-クリップしているチャンネルがあるかどうか。クリップしているチャンネルがある場合は、[ハイライト復元の](Exposure/jp#ハイライト復元.md)使用が有効かもしれません。Rawのヒストグラムがクリップしていないのであれば、他の必要条件がそのままである場合、処理工程の中の何処かにクリッピングの原因があると思われます。作業色空間が十分広いかどうか確認するため、処理工程のその時点のヒストグラムを作業色空間で見るための色域ボタン![<File:Gamut-hist.png>](Gamut-hist.png "File:Gamut-hist.png")を有効にします。確認の途中でニュートラルプロファイルを適用し、全ての調整を一時的に無効して確認し、また元に戻すことも出来ます。作業色空間の大きさ（デフォルトでは非常に大きなProPhotoが採用されています）がクリッピングの原因でなければ、貴方が編集で行っている調整のどれかが原因である可能性があります。露光量補正を減らす、トーンカーブを調整する、必要であればダイナミックレンジ圧縮を使う、などを確認してみます。

　画像編集において、ヒストグラムを見極めることは基本であり、しかも大変便利なスキルです、画像を見るモニターが暗すぎたり、キャリブレーションが不完全であったりしても、ヒストグラムから画像の問題を知ることが出来ます。

　データを視覚化するために、バージョン5.5以降のRawTherapeeにはヒストグラムの水平軸、垂直軸の尺度を別々に変える3つのモードを用意してあります：

- ![<File:Histogram-mode-linear-small.png>](Histogram-mode-linear-small.png "File:Histogram-mode-linear-small.png")　線形-線形モード　　ヒストグラムのサイズに応じて、グリッドラインの尺度を半分、1/4、1/8、1/16に出来ます。
- ![<File:Histogram-mode-logx-small.png>](Histogram-mode-logx-small.png "File:Histogram-mode-logx-small.png")　線形-対数モード　
  X軸の尺度には線形、Y軸と水平のグリッドラインの尺度には対数を使います。グリッドラインの位置は上記と同じく半分、1/4などに出来ます。
- ![<File:Histogram-mode-logxy-small.png>](Histogram-mode-logxy-small.png "File:Histogram-mode-logxy-small.png")　対数-対数モード　　X軸の尺度とY軸の尺度が共に対数となります。グリッドラインの尺度は対数ではありませが、露出に応じていて、各グリッドラインの値は2倍となります。従って、値を示すラインの値は、それぞれが1、3、7、15、31、63、127、つまり、`＝2.0のi乗－1`です。

　画像の中に不均衡に明るい部分が存在する場合は、ヒストグラムでスパイクとなって表示されます。これをY軸が線形なヒストグラムで表示すると、スパイク部分以外が小さくなり過ぎて見難くなるかもしれません。その場合、表示を別の対数モードに変えることで見易くなるでしょう。

　ヒストグラムはパネルの左右どちらにでも表示できます。環境設定→一般→レイアウト→ヒストグラムを左に表示、で行います。

#### Rawヒストグラム

　Rawファイルはセンサーで捉えた大量のデータを含んでいますが、A/Dコンバーターを使って定量化しています。Rawファイルはデータのコンテナとして独自のビット深度、通常16-ビット、を持ちますが、データそのもののビット深度がこれより低い場合もあります、通常12-ビット（0～4096）或いは14-ビット（0～16384）。Rawファイルのデータを画像として表示するためには、データを正しく処理するためのカギとなるビットがあります、ブラックレベルとホワイトレベルです。ブラックレベルは常に0であるとは限りません、センサーやカメラの電子回路がデジタルノイズを発生させるので、ブラックレベルが512付近ということもあります。同様にホワイトレベルも様々な要因で16300になることがあります。更に詳しい情報が[デモザイクと](Demosaicing/jp.md)[新しいRaw形式のサポートを追加する](Adding_Support_for_New_Raw_Formats/jp.md)（特に、`camconst.json`のヘッダー）にあります。RawTherapeeで使っているブラックレベルとホワイトレベルは何カ所かで見られるよう階層的に設定されています:`dcraw.c`の中、rawファイルのメタデータの中、`camconst.json`の中（これが最も優先順位が高い）。更に、RawTherapeeではユーザーが[Rawブラックポイントや](Raw_Black_Points/jp.md)[Rawホワイトポイント](Raw_White_Points/jp.md)機能を使ってこれらのレベルを調整することも出来ます。

　Rawヒストグラムはダーク補正後のデータを表示しています。ヒストグラムの右端はホワイトレベルとして固定されています。RawTherapeeでは、rawヒストグラムは、検出されたブラックとホワイトレベル同様、ユーザーによるこれらレベルの調整によっても影響を受けます。

　Rawヒストグラムを見極める際に、デモザイク処理の方式で“なし”を選択するのもいいでしょう。“なし”を選択することで、プレビューでセンサーのパターンを知ることが可能です、また、[ナビゲーターパネルにカーソルが](The_Image_Editor_Tab/jp#ナビゲーター.md)位置しているピクセルのRGB値を表示できます。これらの値は検出されたブラックレベルやホワイトレベル同様、ユーザーが行ったブラックレベルの調整にも影響されます。但し、ユーザーが行ったホワイトレベルの調整（“Rawホワイトレベル補正”）には影響しません。

### 波形

　これはRGBチャンネルを独特な形で表現するグラフで、画像のピクセルの位置を水平軸で、ピクセル値を垂直軸で示します。同じ位置に同じ値を持つピクセルが多ければ、その部分の表示が強くなります。

　詳しく見ていきましょう：

- 　波形の各列は画像のピクセルの列をグループ化したものです。例えば、波形が256個の列で構成されていれば、横幅が5376ピクセルある画像の場合は、波形の各列が画像の21列分を表していることになります。左から右に向かって、これらの列が該当する画像の21列分の解析結果を表示します。
- 　ピクセル値の解析は、[出力プロファイルを](Color_Management/jp#出力プロファイル.md)考慮した**最終画像で行われます。**
- 　各列で、ピクセルのR、G、Bの値が縦に並べられます。値が大きいチャンネルほど、列の上部にそれが点描されます（R、G、B、3つのチャンネルの値が同一とは限りません）。
- 　複数のチャンネルが偶然にグラフの同じ位置になった時は、それらが混じった色になります。例えば、同じ位置になったチャンネルがレッドとグリーンであれば、イエローの点描で表示されます。
- 　グループ内に同じ値を持つピクセルが多い箇所ほど（同じ位置に沢山の点描が表示される）、表示される色が明るく、或いは濃く見えます。例えば、21列の中の1列で、レッドチャンネルの値が180のピクセル300個と57という値のピクセルが40個あるとします。これをディスプレイに表示すると前者のレッドの方が後者のレッドより明るく、或いは濃く見えます。同じ列に含まれるピクセルであっても、値次第で点描される位置が異なるからです。更に、グラフの左下に"スコープの明るさ調整"という小さい縦型のスライダーが備わっているので明るさが変えられます（スライダーが表示されていない場合は、同じく左下にある
  トグル![text-middle](histogram-ellipsis-small.png "text-middle")のボタンを押せば表示されます）。スライダーで表示の明るさを上げることで、露出過多、或いは露出不足の部分がより鮮明に見えます。

<figure>
<img src="Waveform.jpg" title="Waveform.jpg" />
<figcaption>Waveform.jpg</figcaption>
</figure>

　これまで説明に加え、グラフに引かれている水平の破線を説明します。これらの値の位置は、ヒストグラムの縦の破線同様、1、3、7、15、31、63、127を表しています。また、一番低い所にある破線が0（1と間違い易いですが）、一番高い所の破線が255を表しています。つまり、この波形の描写はグラフの境界（上下）に達することがないので、クリップしている値が見易いと言えます。

　そして、ヒストグラムと同様に、RGBと輝度のチャンネル表示を個々に変えられ（有効・無効）、また、右側の縦のバーにマウスのポインターが位置する箇所のピクセル値を示します。

　本例の画像には、明らかに異なる2つの領域があります。左側には南京錠の画像とそれとは異なる色調を持つ部分があります。右側は基本的に木材のグレーだけで、画像の右端に向かって暗くなっています。画像の輝度が低いため、全般的に波形がグラフの下の方にあります。

　グレーの木材部分に関しては、波形グラフの右側が（木材のドア部分と一致）白く太い下降線を描いています。白く表示されるのは、木材の色が概ねニュートラルグレーなので、3つの色チャンネルがほぼ同じ値を持つ（同じ位置に配置される）ため、混ざると白になるからです。波形が太くなるのは、木材の色調が殆ど変わらない（同じ値を持つ）ため、点描による表示が集中するからです。波形が下降線を描くのは木材の色が右に進むにつれ暗くなっているからです。

　画像の左部分の波形の山は南京錠を表しています。南京錠のグリーンチャンネルとレッドチャンネルの値が概ね似ているため、混ぜられてイエローの点描で表示され、グリーンとレッドより値が低いブルーチャンネルがその下に位置しています。山の上に位置するシアンブルーの薄い筋とグラフの最上部の白い部分は、露出過多になっている南京錠の掛け金部分を表しています。最後に、左端に近い部分で白い波形が突然変化しているのは、ドアの端とドアの枠との間の暗い部分に非常に強いコントラストがあることを表しています。　

<span id="rgb-parade"></span>

### RGBパレード

<figure>
<img src="Parade.jpg" title="Parade.jpg" />
<figcaption>Parade.jpg</figcaption>
</figure>

　前述の波形と同じ解析方法ですが、カラーチャンネルを個々に分離して連続で表示します。

　色が混ぜられる、他の色で覆われることがないので各チャンネルの状態が見易くなります。但し、3つのチャンネルが別々に表示されるため、表示の幅が狭くなり画像のどの部分を解析しているのか分かり難いかもしれません。

　本例では、南京錠の露出過多部分がグリーンとブルーチャンネルに反映されています。

<span id="vectorscopes"></span>

### ベクトルスコープ

　ベクトルスコープは画像のピクセルの色を図式的に表現したものです。各ピクセルの色相と彩度に応じて、そのピクセルを白い点描で表示します。

　波形と同様、ベクトルスコープも出力プロファイルを考慮している最終画像で解析を行います。

　ベクトルスコープには2つのタイプがあります：

- 　**H-S（色相‐彩度）ベクトルスコープ**：[HSL色空間](https://ja.wikipedia.org/wiki/HLS%E8%89%B2%E7%A9%BA%E9%96%93)の色モデルに基づいてピクセルの色を表示します。彩度が高い色ほど点描がグラフの縁、つまり出力色空間の限界点、に点描されます。従って、色域外にある、或いはそれに近いピクセルの量を推測するのに役立ちます。
- 　**H-C（色相‐色度）ベクトルスコープ**：[Lch色空間](https://en.wikipedia.org/wiki/CIELAB_color_space#Cylindrical_model)の色モデルに基づいてピクセルの色を表示します。私たちの目が知覚する色の彩度、つまりその色が"鮮やか"なのか、"褪せている"のかを判定するのに役立ちます。白い点描がグラフの縁に近いほど、彩度が高い色であることを示しています。

　彩度とは、その色の最大値（最も純粋である）と比べた場合の、その色の中にある純粋な色の相対的な量、つまり観察している色に含まれる純粋な色の割合と理解できます。"標準的な"人であれば、彩度100％の色を認識できます。ベクトルスコープで使われる色空間では、これら彩度100％の色は色域の縁に沿った位置に表示されます（CIExyダイヤグラムに似ています）。HSLとLchの違いは、後者の方がより人間の目が感じる色に近いということです。

　H-Sベクトルスコープでは、彩度100％、或いはそれに近い色は、円の縁に白い点描で記されるので、その色が完全に飽和している、或いは切り詰められている（クリップ）ことが分かります。円の内側の同心円は、小さい方から彩度25％、50％、75％、100％を示しています。このベクトルスコープは、出力プロファイルの色空間から外れているピクセルがどれ位あるか見極めるのに便利です。

<figure>
<img src="HSvectorscope.jpg" title="HSvectorscope.jpg" width="500" />
<figcaption>HSvectorscope.jpg</figcaption>
</figure>

　H‐Ｓベクトルスコープでは、右から反時計回りにレッド、イエロー、グリーン、シアン、ブルー、マゼンタを指す軸があります。

　本例の解析では、最も外側の円のイエローとレッドの間（右上部）に飽和したピクセルがあることを示しています。

　残りのピクセルは異なる色の量（彩度）に応じて分布しています。同じ範囲に分布するピクセルの数の多寡によって、白い点描が強く、或いは弱く表示されます。

<figure>
<img src="HSvectorscope_OOG.jpg" title="HSvectorscope_OOG.jpg"
width="500" />
<figcaption>HSvectorscope_OOG.jpg</figcaption>
</figure>

　⟨色域外の色⟩
(![<File:Gamut-warning.png>](Gamut-warning.png "File:Gamut-warning.png"))のボタンを押すと色域外にあるピクセルがシアンカラーでマスクされます。

　H-Cベクトルスコープで表示されている同心円は、それぞれ32％、64％、96％、128％の色度の指標になっています。やはり、外側に位置するピクセルほど色度が高いことを意味します。

　色度（Chroma）の値はナビゲーターにも表示されているL\*a\*b\*の構成要素、a\*、b\*を使って次の計算式から求めたものです：
<img src="Chroma.png" title="Chroma.png" width="200" alt="Chroma.png" />

<figure>
<img src="HCvectorscope_OOG.jpg" title="HCvectorscope_OOG.jpg"
width="500" />
<figcaption>HCvectorscope_OOG.jpg</figcaption>
</figure>

　本例では、最も彩度の高いピクセルの値が約85になっています（特にレッドとイエローの部分で）。

　しかし、3次元色空間は均一ではないことに注意して下さい（球体でも立方体でもありません）。従って、クリップしたピクセルがどれ位あるのか、正しく推定するためには異なる解析も行って確かめる必要があります。

　更に、上部右側に描かれている斜線は平均的な白人の肌色の色相を示したもので、人物写真で、マウスのポインターを人物の肌に持って行けば、このライン沿いにピクセルが表示されます。ピクセルの位置が異なれば、肌色に色被りがあると推測されるので補正する際の参考になります。

### ナビゲーター

　*ナビゲーター*は開いている画像のサムネイルや、カーソル位置のRGB、HSV及びLabの値を表示します。

　ヒストグラムとナビゲーターが表示する値は、メインプレビュー画面上のツールバーにある色空間を指定するボタン![<File:Gamut-hist.png>](Gamut-hist.png "File:Gamut-hist.png")
に応じて、作業プロファイルにおける値、或いはガンマ補正が施されている出力プロファイルの値、どちらかになります。ボタンが押されていれば作業色空間の値、そうでない場合はガンマ補正が行われた出力ファイルの値となります。

　ナビゲーターの数値をクリックするごとに表示尺度が以下の順に変わります：

- \[0-255\]
- \[0-1\]
- \[%\]

　バージョン5.1以降のRawTherapeeでは、フォトサイトの本当の数値を表示出来ます。ナビゲーターの表示形式を\[0-255\]にして、ニュートラルプロファイルを適用、デモザイク処理で“なし”を選択すれば、入力rawデータの範囲内でブラックレベル補正後の本当のフォトサイトのrawデータを表示します。

<div style="clear: both">
</div>

### 履歴

　履歴パネルには貴方が行った各編集操作を反映したエントリーの積み重ねが表示されます。それらエントリーをクリックすることで、行ったその操作時点に戻ったり進んだりすることが出来ます。

　“異なる”ツールを調整するたびに新しいエントリーが追加されますが、同じツールを複数回調整した場合は一つのエントリーとして保持されます。例えば、露光量補正のスライダーを“0”から“0.3”に調整した後に更に“0.6”に増やした場合、保持されるエントリーは一つで、そこに表示されるスライダーの値は最後の“0.6”になります。カーブの調整においても同じように、全てのコントロールポイントの調整が一つの履歴エントリーに集約されます。調整の履歴を2つ（或いはそれ以上）のエントリーに分けたい場合は、その調整の間に別なツールの調整を行います。例えば、カーブ調整で“フィルム調”モードを選択し、そのモードでの調整をとっておきたいと仮定します。そのままコントロールポイントでカーブの調節をした後、トグルボタンでカーブのモードを“フィルム調”から“スタンダード”に変えます。ここでモードを再び“フィルム調”にすると、新しい履歴エントリーが作成されますので、そのままカーブの調整を続けます。

　履歴の積み重ねは保存されません、一度編集タブを閉じると履歴は失われます。但し、貴方が行った調整全ての最終値はサイドカーファイルに保存され、次回その画像を開く時に使われます。

### スナップショット

　*履歴*パネルの下にスナップショットというパネルがあり、一定の調整が加えられた画像を一時的に保存することが出来ます。そこから更に編集を進めて、仕上がりが変化した別な画像も保存出来ます。この機能により、何枚かの編集画像を保存しておいて、最も理想に近い画像を最終的に選ぶという様な使い方が出来ます。将来は、スナップショットをXMPサイドカーファイルに保存出来るようになると思いますが、今のところ途中で別な画像の編集を始めたり、RawTherapee自体の操作を終了したりすると、スナップショットは消去されてしまいます。

## 右側のパネル

　右側のパネルは常にツールボックスを表示するように設定されていますが、オプションでヒストグラムと処理プロファイルセレクターは、右に表示することも出来ます（“*環境設定→一般→レイアウト→ヒストグラムを左側に*”）。右側のパネルは右下にある![Hide
right panel
icon](panel-to-right.png "Hide right panel icon")非表示アイコンや[キーボードショートカットを](Keyboard_Shortcuts/jp#キーボードショートカット.md)使って、非表示にすることが出来ます。

### 処理プロファイルセレクター

　⟨処理プロファイルセレクター⟩は、処理プロファイルの適用、保存、読み込み、コピー、貼り付けを、部分的或いは全体的に行うかどうかを制御するボタンです。

<figure>
<img src="Processing-profiles-selector.png"
title="Processing-profiles-selector.png" />
<figcaption>Processing-profiles-selector.png</figcaption>
</figure>

　詳細に関しては[サイドカーファイル‐処理プロファイル](Sidecar_Files_-_Processing_Profiles/jp.md)
を参照して下さい。

### ツールボックス

　*ツールボックス*には画像編集のために使われる機能が全て収まっています。それぞれ次のセクションで説明します。

## 編集タブのモード

　RawTherapeeは次の二つのモードで画像編集が行えます：

- *シングル編集タブモード*は、一度に一枚の画像だけ編集するモードで、各画像は同じ*画像編集*タブで作業します。[画像編集タブの](The_Image_Editor_Tab/jp#画像編集タブ.md)上部に“[画像スライド](The_Image_Editor_Tab/jp#画像スライド.md)”という横長のパネルがあり、他の画像のサムネイルが見えるので、簡単に編集画像を入れ替えることが出来ます。*前の画像*![<File:Nav-prev.png>](Nav-prev.png "File:Nav-prev.png")、*次の画像*![<File:Nav-next.png>](Nav-next.png "File:Nav-next.png")のボタンが画面下のツールバーにあります（[キーボードショートカットもあります](Keyboard_Shortcuts/jp.md)）。
- *マルチ編集タブモード*は、各画像に対し編集モードを用意し、上記の*画像スライド*は隠されます。このモードに前の画像、次の画像ボタンはありません。複数枚の画像を同時に開くと、それだけメモリーが多く使用されます。

　どちらのモードを使うかは貴方の好みです。環境設定ボタン[Preferences
icon](image:preferences.png.md)、“*環境設定→一般タブ→レイアウト*”で設定します。

　因みにこの*環境設定*画面では、表示言語の選択、背景色、フォントサイズの変更などが行えます。

　また、RawTherapeeは貴方のコンピューターのOSファイルブラウザで、特定の画像を指定して、RawTherapeeの*ファイルブラウザ*を開けずに起動させたり（画像を右クリックし、“*開く→RawTherapee*”で行う）、コマンドライン（rawtherapee/path/to/some/photo/raw）から始めて画像のファイルネームで特定画像を開けさせたりすることも出来ます。このモードはRAM容量が小さいユーザー向けに、ファイルブラウザを使わずにメモリーを節約するために考案されたモードですが、節約できるメモリー量が大きくない割に、操作が煩雑であるということで、将来的に無くなると思います（\[<https://code.google.com/p/rawtherapee/issues/detail?id=2254>　懸案2254\]）。

## 画像スライド

　*シングル編集タブモード*を使う場合（“*環境設定→一般→レイアウト*”）、プレビュー画面の上部に横長のパネルが表示されますが、これが*画像スライド*です。現在開いている画像フォルダー内の全ての画像のサムネイルを含んでおり、開いている画像と同期していますので、[キーボードショートカットや](Keyboard_Shortcuts/jp.md)、![Open
previous image icon](nav-prev.png "Open previous image icon")、![Open
next image
icon](nav-next.png "Open next image icon")を使って、*[ファイルブラウザ](The_File_Browser_Tab/jp#ファイルブラウザタブ.md)*タブまで戻ることなく、前や次の画像を開けます。

　プログラムのバージョンが4.2.10以降であれば、スクリーンスペースを稼ぐために画像スライドの上に表示しているツールバーを非表示にすることが出来ます。モードは2つあり、1つは画像スライドの高さを変えることなしにツールバーの表示/非表示で切り替えるモード、もう1つは、最初と同じですが画像スライドの高さが自動的に変わります。両方法ともキーボードショートカットの操作によって行います。画像スライドの高さが変更されると編集画像のプレビューをリフレッシュする（リサイズ）作業が行われますが、この時にノイズ低減のような演算負荷が高い機能を拡大率100％で使っているような場合は、その切替えに時間かかるため、CPUのパフォーマンスが高くないユーザーのためにリサイズを行わないモードを用意しました。CPUパフォーマンスが高ければ自動でリサイズするモードの方が便利でしょう。

![](Rt_filmstrip_21_toolbar-visible.jpg "Rt_filmstrip_21_toolbar-visible.jpg")
![](Rt_filmstrip_21_toolbar-hidden.jpg)

## モニタープロファイルとソフトプルーフ

　RawTherapee5には、メインのプレビュー画面下に、モニターのカラープロファイルをプレビュー画像に反映させるスイッチがあります。モニターのキャリブレーションが行われていて、そのプロファイルが記憶されていれば、sRGB或いはもっと広い色域で編集作業をしていても、このスイッチ1つでモニターカラープロフィルを正確にプレビュー画像に反映出来ます。注意：OSがOSXの場合、元々sRGBを正確にモニターに反映しないので、この操作を行っても正確にプレビューを表示出来ません。LinuxやWindowsの場合は、広い色域を反映出来ます。

　環境設定→[カラーマネジメントタブで](Preferences/jp#カラーマネジメントタブ.md)、″カラープロファイルがあるディレクトリ″に貴方のモニターのICCプロファイルを保存したフォルダーを指定します。そしてRawTherapeeを再起動すれば設定が完了します。次回からの編集でプレビュー画面下のスイッチで、貴方のモニターカラープロファイルを画像に反映出来ます。その際、特段の理由がなければ、レンダリングの目標は″相対的″を選択して下さい。

　プレビューでソフトプルーフィングも可能です。貴方が撮った画像を″カラーマネジメント″で選択した出力プロファイルでプレビュー画像に反映します。印刷した場合に画像がどの様な映りになるのか、プリント用紙のICCプロファイルに合わせて見ることが出来ます。″ブラックポイントの補正″が有効になっているか確認して下さい。有効であれば、貴方の撮った画像の最も暗い部分と印刷用紙のブラックポイントが一致します。この機能で、印刷時の画像の確認が簡単になり、時間とインクの消費が節約できます。

　但し、上記の編集が可能なのは、貴方のモニターがキャリブレーションされていて、そのプロファイルが記録されている場合だけです。

　″環境設定→カラーマネジメント→カラープロファイルのあるフォルダー″でRawTherapeeに貴方が作成したICCプロフィルがどこのファルダーにあるか指定してあれば、メインプレビュー画面の下で、画像に反映させる貴方のプロファイルを選べます。
